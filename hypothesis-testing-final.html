<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hypothesis Testing for Means - Canadian Economics</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #1a252f 0%, #2c3e50 100%);
            color: #333;
            min-height: 100vh;
        }
        
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.2em;
        }
        
        .canada-header {
            background: linear-gradient(135deg, #ff0000, #ff6b6b);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }
        
        .scenario-selector {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #dee2e6;
        }
        
        .scenario-btn {
            background-color: #6c757d;
            color: white;
            border: none;
            padding: 12px 20px;
            margin: 8px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .scenario-btn:hover {
            background-color: #495057;
            transform: translateY(-2px);
        }
        
        .scenario-btn.active {
            background-color: #007bff;
        }
        
        .calculation-section {
            background: linear-gradient(135deg, #fff3e0, #ffe0b2);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #ff9800;
        }
        
        .data-display {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .data-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #dee2e6;
        }
        
        .data-label {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .data-value {
            font-size: 1.2em;
            color: #007bff;
            font-weight: bold;
        }
        
        .hypothesis-display {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #007bff;
        }
        
        .input-row {
            display: grid;
            grid-template-columns: 2fr 150px 80px 80px 100px;
            gap: 10px;
            align-items: center;
            margin: 15px 0;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            background: #f8f9fa;
        }
        
        .input-row label {
            font-weight: bold;
            color: #2c3e50;
        }
        
        .input-row input {
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        
        .input-row select {
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        
        .small-button {
            padding: 6px 12px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.8em;
            font-weight: bold;
            color: white;
        }
        
        .check-btn {
            background: #17a2b8;
        }
        
        .answer-btn {
            background: #28a745;
        }
        
        .steps-btn {
            background: #6f42c1;
        }
        
        .button {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 30px;
            margin: 10px 5px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
        }
        
        .button:hover {
            background: #218838;
        }
        
        .correct {
            background-color: #d4edda !important;
            border-color: #c3e6cb !important;
        }
        
        .incorrect {
            background-color: #f8d7da !important;
            border-color: #f5c6cb !important;
        }
        
        .step-instructions {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #2196f3;
        }
        
        .tutorial-box {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border: 1px solid #dee2e6;
            display: none;
        }
        
        .tutorial-step {
            background: white;
            padding: 10px;
            margin: 8px 0;
            border-radius: 5px;
            border-left: 3px solid #007bff;
            font-family: monospace;
        }
        
        .answer-display {
            background: #d4edda;
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
            border: 1px solid #c3e6cb;
            font-weight: bold;
            display: none;
        }
        
        .decision-section {
            background: linear-gradient(135deg, #f3e5f5, #e1bee7);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #9c27b0;
        }
        
        .formula-box {
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
            margin: 10px 0;
            font-family: monospace;
            text-align: center;
            font-size: 1.1em;
        }
        
        .comparison-table {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 2px solid #6c757d;
        }
        
        .method-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            font-size: 0.9em;
        }
        
        .method-box {
            text-align: center;
            padding: 10px;
            background: #e9ecef;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä Hypothesis Testing for Means - Step by Step</h1>
        
        <div class="canada-header">
            <h2>üá®üá¶ Canadian Economic Hypothesis Testing</h2>
            <p><strong>Learn Statistical Testing</strong> ‚Ä¢ <strong>Real Economic Data</strong> ‚Ä¢ <strong>Three Decision Methods</strong></p>
        </div>
        
        <div class="scenario-selector">
            <div style="font-size: 1.3em; font-weight: bold; color: #2c3e50; margin-bottom: 15px;">
                üìà Choose Economic Testing Scenario:
            </div>
            <button class="scenario-btn" onclick="chooseScenario('income')">üí∞ Canadian Income</button>
            <button class="scenario-btn" onclick="chooseScenario('gdp')">üìä GDP Growth</button>
            <button class="scenario-btn" onclick="chooseScenario('inflation')">üìà Inflation Rate</button>
            <button class="scenario-btn" onclick="chooseScenario('unemployment')">üë• Unemployment</button>
        </div>
        
        <div id="problemArea" style="display: none;">
            <div class="calculation-section">
                <h3>üìã Economic Testing Scenario:</h3>
                <div class="step-instructions">
                    <div id="scenarioDescription"></div>
                </div>
                
                <div class="hypothesis-display">
                    <div style="font-weight: bold; color: #2c3e50; margin-bottom: 10px;">Hypotheses:</div>
                    <div id="h0Display" style="margin: 5px 0;"></div>
                    <div id="h1Display" style="margin: 5px 0;"></div>
                    <div id="testTypeDisplay" style="margin: 5px 0; font-weight: bold; color: #007bff;"></div>
                </div>
                
                <div class="data-display">
                    <div class="data-box">
                        <div class="data-label">Sample Data:</div>
                        <div>Sample Mean (xÃÑ): <span id="sampleMean" class="data-value"></span></div>
                        <div>Sample Size (n): <span id="sampleSize" class="data-value"></span></div>
                        <div>Sample St Dev (s): <span id="sampleStdDev" class="data-value"></span></div>
                    </div>
                    <div class="data-box">
                        <div class="data-label">Population Parameters:</div>
                        <div>Hypothesized Mean (Œº‚ÇÄ): <span id="popMean" class="data-value"></span></div>
                        <div>Significance Level (Œ±): <span id="alphaLevel" class="data-value"></span></div>
                        <div>Test Type: <span id="testDirection" class="data-value"></span></div>
                    </div>
                </div>
            </div>
            
            <div class="calculation-section">
                <h3>üìä Step 1: Calculate Test Statistic</h3>
                <div class="step-instructions">
                    <strong>Formula:</strong> For sample mean with unknown œÉ, use t-test
                </div>
                
                <div class="formula-box">
                    t = (xÃÑ - Œº‚ÇÄ) / (s / ‚àön)
                </div>
                
                <div class="input-row">
                    <label for="standardError">Standard Error (s / ‚àön):</label>
                    <input type="number" id="standardError" step="0.001" placeholder="Calculate SE">
                    <button class="small-button check-btn" onclick="checkStandardError()">Check</button>
                    <button class="small-button answer-btn" onclick="showAnswer('standardError')">Answer</button>
                    <button class="small-button steps-btn" onclick="showSteps('standard-error')">Steps</button>
                </div>
                
                <div class="answer-display" id="standardError-answer"></div>
                <div class="tutorial-box" id="standard-error-tutorial"></div>
                
                <div class="input-row">
                    <label for="testStatistic">Test Statistic (t-value):</label>
                    <input type="number" id="testStatistic" step="0.001" placeholder="Calculate t">
                    <button class="small-button check-btn" onclick="checkTestStatistic()">Check</button>
                    <button class="small-button answer-btn" onclick="showAnswer('testStatistic')">Answer</button>
                    <button class="small-button steps-btn" onclick="showSteps('test-statistic')">Steps</button>
                </div>
                
                <div class="answer-display" id="testStatistic-answer"></div>
                <div class="tutorial-box" id="test-statistic-tutorial"></div>
            </div>
            
            <div class="calculation-section">
                <h3>üìä Step 2: Critical Values & Confidence Interval</h3>
                
                <div class="input-row">
                    <label for="degreesOfFreedom">Degrees of Freedom (df):</label>
                    <input type="number" id="degreesOfFreedom" step="1" placeholder="n - 1">
                    <button class="small-button check-btn" onclick="checkDegreesOfFreedom()">Check</button>
                    <button class="small-button answer-btn" onclick="showAnswer('degreesOfFreedom')">Answer</button>
                    <button class="small-button steps-btn" onclick="showSteps('degrees-freedom')">Steps</button>
                </div>
                
                <div class="answer-display" id="degreesOfFreedom-answer"></div>
                
                <div class="input-row">
                    <label for="criticalValue">Critical Value (t-critical):</label>
                    <input type="number" id="criticalValue" step="0.001" placeholder="From t-table">
                    <button class="small-button check-btn" onclick="checkCriticalValue()">Check</button>
                    <button class="small-button answer-btn" onclick="showAnswer('criticalValue')">Answer</button>
                    <button class="small-button steps-btn" onclick="showSteps('critical-value')">Steps</button>
                </div>
                
                <div class="answer-display" id="criticalValue-answer"></div>
                
                <div class="input-row">
                    <label for="lowerBound">95% CI Lower Bound:</label>
                    <input type="number" id="lowerBound" step="0.001" placeholder="xÃÑ - margin">
                    <button class="small-button check-btn" onclick="checkLowerBound()">Check</button>
                    <button class="small-button answer-btn" onclick="showAnswer('lowerBound')">Answer</button>
                    <button class="small-button steps-btn" onclick="showSteps('confidence-interval')">Steps</button>
                </div>
                
                <div class="answer-display" id="lowerBound-answer"></div>
                
                <div class="input-row">
                    <label for="upperBound">95% CI Upper Bound:</label>
                    <input type="number" id="upperBound" step="0.001" placeholder="xÃÑ + margin">
                    <button class="small-button check-btn" onclick="checkUpperBound()">Check</button>
                    <button class="small-button answer-btn" onclick="showAnswer('upperBound')">Answer</button>
                    <button class="small-button steps-btn" onclick="showSteps('ci-interpretation')">Steps</button>
                </div>
                
                <div class="answer-display" id="upperBound-answer"></div>
                <div class="tutorial-box" id="confidence-interval-tutorial"></div>
            </div>
            
            <div class="decision-section">
                <h3>‚öñÔ∏è Step 3: Three Decision Methods</h3>
                <div class="step-instructions">
                    <strong>All three methods must give the SAME decision:</strong><br>
                    <strong>1. Test Statistic:</strong> Compare |t| to t-critical<br>
                    <strong>2. P-value:</strong> Compare p-value to Œ±<br>
                    <strong>3. Confidence Interval:</strong> Check if Œº‚ÇÄ is inside CI
                </div>
                
                <div class="input-row">
                    <label for="pValue">P-value (approximate):</label>
                    <input type="number" id="pValue" step="0.001" placeholder="Probability">
                    <button class="small-button check-btn" onclick="checkPValue()">Check</button>
                    <button class="small-button answer-btn" onclick="showAnswer('pValue')">Answer</button>
                    <button class="small-button steps-btn" onclick="showSteps('p-value')">Steps</button>
                </div>
                
                <div class="answer-display" id="pValue-answer"></div>
                
                <div class="comparison-table">
                    <h4 style="color: #2c3e50; margin-top: 0;">üìã Decision Comparison Table:</h4>
                    <div class="method-grid">
                        <div style="font-weight: bold;">Method 1: Test Statistic</div>
                        <div style="font-weight: bold;">Method 2: P-value</div>
                        <div style="font-weight: bold;">Method 3: Confidence Interval</div>
                        
                        <div id="testStatDecision" class="method-box">
                            Calculate test statistic first
                        </div>
                        <div id="pValueDecision" class="method-box">
                            Calculate p-value first
                        </div>
                        <div id="ciDecision" class="method-box">
                            Calculate CI first
                        </div>
                    </div>
                </div>
                
                <div class="input-row">
                    <label>Does Œº‚ÇÄ fall within the CI?</label>
                    <select id="ciContains">
                        <option value="">Choose...</option>
                        <option value="yes">Yes (Œº‚ÇÄ is in CI)</option>
                        <option value="no">No (Œº‚ÇÄ is outside CI)</option>
                    </select>
                    <button class="small-button check-btn" onclick="checkCIContains()">Check</button>
                    <button class="small-button answer-btn" onclick="showAnswer('ciContains')">Answer</button>
                    <button class="small-button steps-btn" onclick="showSteps('ci-decision')">Steps</button>
                </div>
                
                <div class="answer-display" id="ciContains-answer"></div>
                
                <div class="input-row">
                    <label>Final Statistical Decision:</label>
                    <select id="decision">
                        <option value="">Choose...</option>
                        <option value="reject">Reject H‚ÇÄ</option>
                        <option value="fail">Fail to Reject H‚ÇÄ</option>
                    </select>
                    <button class="small-button check-btn" onclick="checkDecision()">Check</button>
                    <button class="small-button answer-btn" onclick="showAnswer('decision')">Answer</button>
                    <button class="small-button steps-btn" onclick="showSteps('final-decision')">Steps</button>
                </div>
                
                <div class="answer-display" id="decision-answer"></div>
            </div>
            
            <button class="button" onclick="generateNewProblem()">üé≤ Generate New Problem</button>
            <button class="button" onclick="checkAllAnswers()">‚úÖ Check All Answers</button>
            <button class="button" onclick="showCompleteSolution()">üìñ Complete Solution</button>
        </div>
    </div>

    <script>
        let currentScenario = '';
        let testData = {};
        let correctAnswers = {};

        const scenarios = {
            'income': {
                name: 'Canadian Household Income Analysis',
                description: 'Statistics Canada wants to test if average Canadian household income has changed from the reported $75,000.',
                testTypes: [
                    {
                        h0: 'H‚ÇÄ: Œº = $75,000',
                        h1: 'H‚ÇÅ: Œº ‚â† $75,000', 
                        type: 'two-tail',
                        mu0: 75000,
                        direction: 'Two-tail Test'
                    },
                    {
                        h0: 'H‚ÇÄ: Œº ‚â§ $75,000',
                        h1: 'H‚ÇÅ: Œº > $75,000',
                        type: 'right-tail', 
                        mu0: 75000,
                        direction: 'Right-tail Test'
                    }
                ],
                unit: 'dollars',
                context: 'household income'
            },
            'gdp': {
                name: 'Canadian GDP Growth Analysis',
                description: 'Bank of Canada economists test if quarterly GDP growth differs from the target 2.5%.',
                testTypes: [
                    {
                        h0: 'H‚ÇÄ: Œº = 2.5%',
                        h1: 'H‚ÇÅ: Œº ‚â† 2.5%',
                        type: 'two-tail',
                        mu0: 2.5,
                        direction: 'Two-tail Test'
                    },
                    {
                        h0: 'H‚ÇÄ: Œº ‚â§ 2.5%',
                        h1: 'H‚ÇÅ: Œº > 2.5%',
                        type: 'right-tail',
                        mu0: 2.5,
                        direction: 'Right-tail Test'
                    }
                ],
                unit: 'percent',
                context: 'GDP growth'
            },
            'inflation': {
                name: 'Bank of Canada Inflation Target',
                description: 'Testing if current inflation rate differs from the Bank of Canada\'s 2.0% target.',
                testTypes: [
                    {
                        h0: 'H‚ÇÄ: Œº = 2.0%',
                        h1: 'H‚ÇÅ: Œº ‚â† 2.0%',
                        type: 'two-tail',
                        mu0: 2.0,
                        direction: 'Two-tail Test'
                    },
                    {
                        h0: 'H‚ÇÄ: Œº ‚â• 2.0%',
                        h1: 'H‚ÇÅ: Œº < 2.0%',
                        type: 'left-tail',
                        mu0: 2.0,
                        direction: 'Left-tail Test'
                    }
                ],
                unit: 'percent',
                context: 'inflation rate'
            },
            'unemployment': {
                name: 'Provincial Unemployment Analysis',
                description: 'Testing if unemployment rate in Ontario differs from the national average of 6.0%.',
                testTypes: [
                    {
                        h0: 'H‚ÇÄ: Œº = 6.0%',
                        h1: 'H‚ÇÅ: Œº ‚â† 6.0%',
                        type: 'two-tail',
                        mu0: 6.0,
                        direction: 'Two-tail Test'
                    },
                    {
                        h0: 'H‚ÇÄ: Œº ‚â• 6.0%', 
                        h1: 'H‚ÇÅ: Œº < 6.0%',
                        type: 'left-tail',
                        mu0: 6.0,
                        direction: 'Left-tail Test'
                    }
                ],
                unit: 'percent',
                context: 'unemployment rate'
            }
        };

        function chooseScenario(scenario) {
            currentScenario = scenario;
            
            // Update button styles
            document.querySelectorAll('.scenario-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            event.target.classList.add('active');
            
            generateTestData(scenario);
            document.getElementById('problemArea').style.display = 'block';
            clearAllInputs();
        }

        function generateTestData(scenario) {
            const scenarioData = scenarios[scenario];
            const testType = scenarioData.testTypes[Math.floor(Math.random() * scenarioData.testTypes.length)];
            
            // Generate realistic sample data
            let sampleSize = 20 + Math.floor(Math.random() * 30); // 20-50
            let mu0 = testType.mu0;
            let sampleMean, sampleStdDev;
            
            if (scenario === 'income') {
                sampleMean = Math.round((mu0 + (Math.random() - 0.5) * 8000));
                sampleStdDev = Math.round(8000 + Math.random() * 4000);
            } else {
                sampleMean = Math.round((mu0 + (Math.random() - 0.5) * 1.5) * 100) / 100;
                sampleStdDev = Math.round((0.5 + Math.random() * 1.0) * 100) / 100;
            }
            
            const alpha = 0.05;
            
            testData = {
                scenario: scenarioData.name,
                description: scenarioData.description,
                h0: testType.h0,
                h1: testType.h1,
                testType: testType.type,
                direction: testType.direction,
                sampleMean: sampleMean,
                sampleSize: sampleSize,
                sampleStdDev: sampleStdDev,
                mu0: mu0,
                alpha: alpha,
                unit: scenarioData.unit,
                context: scenarioData.context
            };
            
            calculateCorrectAnswers();
            updateDisplay();
        }

        function calculateCorrectAnswers() {
            const { sampleMean, sampleSize, sampleStdDev, mu0, alpha, testType } = testData;
            
            // Standard Error
            const standardError = sampleStdDev / Math.sqrt(sampleSize);
            
            // Test Statistic
            const testStatistic = (sampleMean - mu0) / standardError;
            
            // Degrees of Freedom
            const df = sampleSize - 1;
            
            // Critical Values
            let criticalValue;
            if (testType === 'two-tail') {
                if (df >= 30) criticalValue = 2.042;
                else if (df >= 20) criticalValue = 2.086;
                else if (df >= 15) criticalValue = 2.131;
                else criticalValue = 2.179;
            } else {
                if (df >= 30) criticalValue = 1.697;
                else if (df >= 20) criticalValue = 1.725;
                else if (df >= 15) criticalValue = 1.753;
                else criticalValue = 1.796;
            }
            
            // P-value approximation
            let pValue;
            const absT = Math.abs(testStatistic);
            if (absT > 3) pValue = 0.001;
            else if (absT > 2.5) pValue = 0.01;
            else if (absT > 2) pValue = 0.05;
            else if (absT > 1.5) pValue = 0.10;
            else pValue = 0.20;
            
            if (testType === 'two-tail') pValue *= 2;
            
            // Confidence Interval calculations
            const marginError = criticalValue * standardError;
            const lowerBound = sampleMean - marginError;
            const upperBound = sampleMean + marginError;
            const ciContainsMu0 = (mu0 >= lowerBound && mu0 <= upperBound);
            
            // Decision
            const decision = (testType === 'two-tail') ? 
                (Math.abs(testStatistic) > criticalValue ? 'reject' : 'fail') :
                (testType === 'right-tail' ? 
                    (testStatistic > criticalValue ? 'reject' : 'fail') :
                    (testStatistic < -criticalValue ? 'reject' : 'fail'));
            
            correctAnswers = {
                standardError: standardError,
                testStatistic: testStatistic,
                degreesOfFreedom: df,
                criticalValue: criticalValue,
                pValue: pValue,
                marginError: marginError,
                lowerBound: lowerBound,
                upperBound: upperBound,
                ciContains: ciContainsMu0 ? 'yes' : 'no',
                decision: decision
            };
        }

        function updateDisplay() {
            document.getElementById('scenarioDescription').innerHTML = 
                `<strong>${testData.scenario}</strong><br>${testData.description}`;
            
            document.getElementById('h0Display').textContent = testData.h0;
            document.getElementById('h1Display').textContent = testData.h1;
            document.getElementById('testTypeDisplay').textContent = testData.direction;
            
            const format = testData.unit === 'dollars' ? (v) => `$${v.toLocaleString()}` : (v) => `${v}%`;
            
            document.getElementById('sampleMean').textContent = format(testData.sampleMean);
            document.getElementById('sampleSize').textContent = testData.sampleSize;
            document.getElementById('sampleStdDev').textContent = testData.unit === 'dollars' ? 
                `$${testData.sampleStdDev.toLocaleString()}` : `${testData.sampleStdDev}%`;
            document.getElementById('popMean').textContent = format(testData.mu0);
            document.getElementById('alphaLevel').textContent = `${testData.alpha}`;
            document.getElementById('testDirection').textContent = testData.direction;
        }

        function checkAnswer(inputId, correctValue, tolerance = 0.01) {
            const input = document.getElementById(inputId);
            const userAnswer = parseFloat(input.value);
            
            if (isNaN(userAnswer)) {
                input.className = '';
                return false;
            }
            
            const isCorrect = Math.abs(userAnswer - correctValue) <= tolerance;
            input.className = isCorrect ? 'correct' : 'incorrect';
            return isCorrect;
        }

        function checkStandardError() {
            return checkAnswer('standardError', correctAnswers.standardError, 0.01);
        }

        function checkTestStatistic() {
            return checkAnswer('testStatistic', correctAnswers.testStatistic, 0.05);
        }

        function checkDegreesOfFreedom() {
            return checkAnswer('degreesOfFreedom', correctAnswers.degreesOfFreedom, 0);
        }

        function checkCriticalValue() {
            return checkAnswer('criticalValue', correctAnswers.criticalValue, 0.1);
        }

        function checkPValue() {
            return checkAnswer('pValue', correctAnswers.pValue, 0.02);
        }

        function checkLowerBound() {
            return checkAnswer('lowerBound', correctAnswers.lowerBound, 0.01);
        }

        function checkUpperBound() {
            return checkAnswer('upperBound', correctAnswers.upperBound, 0.01);
        }

        function checkCIContains() {
            const select = document.getElementById('ciContains');
            const userAnswer = select.value;
            const isCorrect = userAnswer === correctAnswers.ciContains;
            select.style.backgroundColor = isCorrect ? '#d4edda' : '#f8d7da';
            select.style.borderColor = isCorrect ? '#c3e6cb' : '#f5c6cb';
            return isCorrect;
        }

        function checkDecision() {
            const select = document.getElementById('decision');
            const userAnswer = select.value;
            const isCorrect = userAnswer === correctAnswers.decision;
            select.style.backgroundColor = isCorrect ? '#d4edda' : '#f8d7da';
            select.style.borderColor = isCorrect ? '#c3e6cb' : '#f5c6cb';
            return isCorrect;
        }

        function showAnswer(inputId) {
            const answerDiv = document.getElementById(inputId + '-answer');
            let correctValue = correctAnswers[inputId];
            
            switch(inputId) {
                case 'standardError':
                    answerDiv.innerHTML = `‚úÖ Standard Error = ${correctValue.toFixed(4)}`;
                    break;
                case 'testStatistic':
                    answerDiv.innerHTML = `‚úÖ Test Statistic (t) = ${correctValue.toFixed(3)}`;
                    break;
                case 'degreesOfFreedom':
                    answerDiv.innerHTML = `‚úÖ Degrees of Freedom = ${correctValue}`;
                    break;
                case 'criticalValue':
                    answerDiv.innerHTML = `‚úÖ Critical Value = ¬±${correctValue.toFixed(3)}`;
                    break;
                case 'pValue':
                    answerDiv.innerHTML = `‚úÖ P-value ‚âà ${correctValue.toFixed(3)}`;
                    break;
                case 'lowerBound':
                    const lowerFormatted = testData.unit === 'dollars' ? `$${correctValue.toFixed(0)}` : `${correctValue.toFixed(2)}%`;
                    answerDiv.innerHTML = `‚úÖ Lower Bound = ${lowerFormatted}`;
                    break;
                case 'upperBound':
                    const upperFormatted = testData.unit === 'dollars' ? `$${correctValue.toFixed(0)}` : `${correctValue.toFixed(2)}%`;
                    answerDiv.innerHTML = `‚úÖ Upper Bound = ${upperFormatted}`;
                    break;
                case 'ciContains':
                    const containsText = correctValue === 'yes' ? 'Yes, Œº‚ÇÄ is in the CI' : 'No, Œº‚ÇÄ is outside the CI';
                    answerDiv.innerHTML = `‚úÖ ${containsText}`;
                    break;
                case 'decision':
                    const decisionText = correctValue === 'reject' ? 'Reject H‚ÇÄ' : 'Fail to Reject H‚ÇÄ';
                    answerDiv.innerHTML = `‚úÖ Decision: ${decisionText}`;
                    break;
            }
            answerDiv.style.display = 'block';
        }

        function showSteps(stepType) {
            const tutorialDiv = document.getElementById(stepType + '-tutorial');
            
            if (stepType === 'standard-error') {
                tutorialDiv.innerHTML = `
                    <h4>üìö How to Calculate Standard Error:</h4>
                    <div class="tutorial-step">
                        <strong>Formula:</strong> SE = s / ‚àön<br>
                        SE = ${testData.sampleStdDev} / ‚àö${testData.sampleSize}<br>
                        SE = ${testData.sampleStdDev} / ${Math.sqrt(testData.sampleSize).toFixed(3)}<br>
                        SE = ${correctAnswers.standardError.toFixed(4)}
                    </div>
                `;
            } else if (stepType === 'test-statistic') {
                tutorialDiv.innerHTML = `
                    <h4>üìö How to Calculate Test Statistic:</h4>
                    <div class="tutorial-step">
                        <strong>Formula:</strong> t = (xÃÑ - Œº‚ÇÄ) / SE<br>
                        t = (${testData.sampleMean} - ${testData.mu0}) / ${correctAnswers.standardError.toFixed(4)}<br>
                        t = ${(testData.sampleMean - testData.mu0).toFixed(2)} / ${correctAnswers.standardError.toFixed(4)}<br>
                        t = ${correctAnswers.testStatistic.toFixed(3)}
                    </div>
                `;
            } else if (stepType === 'confidence-interval') {
                const lowerFormatted = testData.unit === 'dollars' ? `$${correctAnswers.lowerBound.toFixed(0)}` : `${correctAnswers.lowerBound.toFixed(2)}%`;
                const upperFormatted = testData.unit === 'dollars' ? `$${correctAnswers.upperBound.toFixed(0)}` : `${correctAnswers.upperBound.toFixed(2)}%`;
                const meanFormatted = testData.unit === 'dollars' ? `$${testData.sampleMean}` : `${testData.sampleMean}%`;
                
                tutorialDiv.innerHTML = `
                    <h4>üìö How to Calculate Confidence Interval:</h4>
                    <div class="tutorial-step">
                        <strong>Formula:</strong> CI = xÃÑ ¬± (t-critical √ó SE)<br>
                        Margin of Error = ${correctAnswers.criticalValue.toFixed(3)} √ó ${correctAnswers.standardError.toFixed(4)} = ${correctAnswers.marginError.toFixed(4)}<br>
                        Lower Bound = ${meanFormatted} - ${correctAnswers.marginError.toFixed(4)} = ${lowerFormatted}<br>
                        Upper Bound = ${meanFormatted} + ${correctAnswers.marginError.toFixed(4)} = ${upperFormatted}<br>
                        <strong>95% CI:</strong> (${lowerFormatted}, ${upperFormatted})
                    </div>
                `;
            } else if (stepType === 'final-decision') {
                tutorialDiv.innerHTML = `
                    <h4>üìö Final Decision - Three Methods Must Agree:</h4>
                    <div class="tutorial-step">
                        <strong>Method 1:</strong> |t| = ${Math.abs(correctAnswers.testStatistic).toFixed(3)} vs ${correctAnswers.criticalValue.toFixed(3)} ‚Üí ${correctAnswers.decision === 'reject' ? 'Reject H‚ÇÄ' : 'Fail to Reject H‚ÇÄ'}<br>
                        <strong>Method 2:</strong> p = ${correctAnswers.pValue.toFixed(3)} vs 0.05 ‚Üí ${correctAnswers.decision === 'reject' ? 'Reject H‚ÇÄ' : 'Fail to Reject H‚ÇÄ'}<br>
                        <strong>Method 3:</strong> Œº‚ÇÄ is ${correctAnswers.ciContains === 'yes' ? 'inside' : 'outside'} CI ‚Üí ${correctAnswers.decision === 'reject' ? 'Reject H‚ÇÄ' : 'Fail to Reject H‚ÇÄ'}<br><br>
                        <strong>All methods agree!</strong>
                    </div>
                `;
            }
            
            tutorialDiv.style.display = tutorialDiv.style.display === 'none' ? 'block' : 'none';
        }

        function checkAllAnswers() {
            const results = [
                checkStandardError(),
                checkTestStatistic(),
                checkDegreesOfFreedom(),
                checkCriticalValue(),
                checkPValue(),
                checkLowerBound(),
                checkUpperBound(),
                checkCIContains(),
                checkDecision()
            ];
            
            const correct = results.filter(r => r).length;
            const total = results.length;
            
            alert(`You got ${correct}/${total} calculations correct!\n\n${correct === total ? 'Perfect! All three decision methods agree! üéâ' : 'Keep working on the incorrect calculations.'}`);
        }

        function generateNewProblem() {
            if (currentScenario) {
                generateTestData(currentScenario);
                clearAllInputs();
            } else {
                alert('Please select an economic scenario first.');
            }
        }

        function clearAllInputs() {
            const inputs = ['standardError', 'testStatistic', 'degreesOfFreedom', 'criticalValue', 'pValue', 'lowerBound', 'upperBound'];
            inputs.forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.value = '';
                    input.className = '';
                }
                
                const answerDiv = document.getElementById(id + '-answer');
                if (answerDiv) answerDiv.style.display = 'none';
            });
            
            const selects = ['decision', 'ciContains'];
            selects.forEach(id => {
                const select = document.getElementById(id);
                if (select) {
                    select.value = '';
                    select.style.backgroundColor = '';
                    select.style.borderColor = '';
                }
            });
        }

        function showCompleteSolution() {
            if (!currentScenario) {
                alert('Please select an economic scenario first.');
                return;
            }
            
            alert(`Complete Solution:\n\nScenario: ${testData.scenario}\n\nH‚ÇÄ: ${testData.h0}\nH‚ÇÅ: ${testData.h1}\n\nSample Data:\n‚Ä¢ Mean: ${testData.sampleMean}\n‚Ä¢ Size: ${testData.sampleSize}\n‚Ä¢ Std Dev: ${testData.sampleStdDev}\n\nCalculations:\n‚Ä¢ Standard Error: ${correctAnswers.standardError.toFixed(4)}\n‚Ä¢ Test Statistic: ${correctAnswers.testStatistic.toFixed(3)}\n‚Ä¢ Critical Value: ¬±${correctAnswers.criticalValue.toFixed(3)}\n‚Ä¢ P-value: ${correctAnswers.pValue.toFixed(3)}\n‚Ä¢ 95% CI: (${correctAnswers.lowerBound.toFixed(2)}, ${correctAnswers.upperBound.toFixed(2)})\n\nDecision: ${correctAnswers.decision === 'reject' ? 'Reject H‚ÇÄ' : 'Fail to Reject H‚ÇÄ'}\n\nAll three methods agree!`);
        }
    </script>
</body>
</html>
