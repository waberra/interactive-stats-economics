<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GDP Expenditure Approach & Economic Growth Calculator</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }
        
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .formula-box {
            background: linear-gradient(135deg, #e8f4f8, #d1ecf1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #667eea;
            text-align: center;
        }
        
        .formula {
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            font-family: 'Courier New', monospace;
            margin: 8px 0;
        }
        
        .formula-explanation {
            margin-top: 15px;
            font-size: 0.9em;
            color: #555;
        }
        
        .type-indicator {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
            margin-bottom: 20px;
        }
        
        .type-basic {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }
        
        .type-growth {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }
        
        .type-comprehensive {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: white;
        }
        
        .economic-context {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #dee2e6;
        }
        
        .context-header {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .economic-data {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .data-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .data-label {
            font-weight: bold;
            color: #2c3e50;
        }
        
        .data-value {
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
        }
        
        .question-text {
            background: linear-gradient(135deg, #ecf0f1, #bdc3c7);
            padding: 25px;
            border-left: 5px solid #667eea;
            margin-bottom: 25px;
            line-height: 1.6;
            border-radius: 0 10px 10px 0;
        }
        
        .question-text h3 {
            margin-top: 0;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .expenditure-components {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #f39c12;
        }
        
        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        
        .component-item {
            background: white;
            padding: 12px;
            border-radius: 6px;
            text-align: center;
            border: 2px solid #f39c12;
        }
        
        .component-label {
            font-weight: bold;
            color: #2c3e50;
            font-size: 0.9em;
        }
        
        .component-value {
            font-size: 1.3em;
            font-weight: bold;
            color: #e67e22;
            margin-top: 5px;
        }
        
        .answer-section {
            background: linear-gradient(135deg, #ffffff, #f8f9fa);
            padding: 25px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            margin: 20px 0;
        }
        
        .input-group {
            margin: 15px 0;
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .input-group label {
            display: inline-block;
            min-width: 180px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .input-group input {
            width: 150px;
            padding: 10px 15px;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            font-size: 16px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-1px);
        }
        
        .input-correct {
            border-color: #27ae60 !important;
            background-color: #d4edda !important;
        }
        
        .input-incorrect {
            border-color: #e74c3c !important;
            background-color: #f8d7da !important;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn:hover {
            background: linear-gradient(135deg, #764ba2, #667eea);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
        }
        
        .btn-secondary:hover {
            background: linear-gradient(135deg, #7f8c8d, #6c7b7d);
        }
        
        .btn-generate {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
        }
        
        .btn-generate:hover {
            background: linear-gradient(135deg, #2ecc71, #58d68d);
        }
        
        .feedback {
            padding: 18px;
            margin: 20px 0;
            border-radius: 10px;
            font-weight: bold;
            border-left: 5px solid;
        }
        
        .feedback.correct {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            color: #155724;
            border-left-color: #27ae60;
        }
        
        .feedback.partial {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            color: #856404;
            border-left-color: #f39c12;
        }
        
        .feedback.incorrect {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            color: #721c24;
            border-left-color: #e74c3c;
        }
        
        .solution {
            background: linear-gradient(135deg, #eaf2f8, #d6eaf8);
            padding: 25px;
            margin: 25px 0;
            border-radius: 12px;
            border-left: 5px solid #667eea;
        }
        
        .solution h4 {
            margin-top: 0;
            color: #2c3e50;
            font-size: 1.3em;
        }
        
        .solution-step {
            background-color: white;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            border: 1px solid #d6eaf8;
        }
        
        .solution-step h5 {
            margin: 0 0 10px 0;
            color: #2c3e50;
            font-size: 1.1em;
        }
        
        .calculation {
            font-family: 'Courier New', monospace;
            background-color: #f8f9fa;
            padding: 8px 12px;
            border-radius: 5px;
            display: block;
            margin: 5px 0;
            border: 1px solid #dee2e6;
            font-size: 1.1em;
        }
        
        .result {
            font-size: 1.2em;
            font-weight: bold;
            color: #2c3e50;
            background: linear-gradient(135deg, #d6eaf8, #aed6f1);
            padding: 10px 15px;
            border-radius: 5px;
            display: inline-block;
            margin: 8px 0;
        }
        
        .interpretation-box {
            background: linear-gradient(135deg, #e8f4f8, #d1ecf1);
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
            font-style: italic;
            color: #2c3e50;
        }
        
        .hidden {
            display: none;
        }
        
        .navigation {
            text-align: center;
            margin: 30px 0;
        }
        
        .question-counter {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            display: inline-block;
            margin: 10px;
            font-weight: bold;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .question-types {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .type-selector {
            background: linear-gradient(135deg, #ecf0f1, #bdc3c7);
            border: 2px solid #95a5a6;
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .type-selector.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #764ba2;
        }
        
        .type-selector:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .comprehensive-answers {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
    </style>
</head>
<body>
    <h1>üí∞ GDP Expenditure Approach & Economic Growth</h1>
    <h2 style="text-align: center; color: #2c3e50; margin-top: -20px;">Nominal GDP ‚Ä¢ Real GDP ‚Ä¢ Growth Rate ‚Ä¢ Per Capita ‚Ä¢ Productivity</h2>
    
    <div class="container">
        <div class="formula-box">
            <div class="formula">GDP = C + I + G + (X - M)</div>
            <div class="formula">Real GDP = Nominal GDP √∑ GDP Deflator</div>
            <div class="formula">Economic Growth = ((Real GDP‚ÇÇ - Real GDP‚ÇÅ) √∑ Real GDP‚ÇÅ) √ó 100%</div>
            <div class="formula">GDP per Capita = GDP √∑ Population</div>
            <div class="formula">Productivity = GDP √∑ Total Hours Worked</div>
            <div class="formula-explanation">
                <strong>C:</strong> Consumption &nbsp;|&nbsp;
                <strong>I:</strong> Investment &nbsp;|&nbsp;
                <strong>G:</strong> Government Spending &nbsp;|&nbsp;
                <strong>(X - M):</strong> Net Exports
            </div>
        </div>
        
        <div class="navigation">
            <div class="question-counter" id="question-counter">Question 1 of ‚àû</div>
            
            <div class="question-types">
                <div class="type-selector active" id="basic-selector" onclick="selectQuestionType('basic')">
                    üí∞ GDP Calculations
                </div>
                <div class="type-selector" id="growth-selector" onclick="selectQuestionType('growth')">
                    üìà Economic Growth
                </div>
                <div class="type-selector" id="comprehensive-selector" onclick="selectQuestionType('comprehensive')">
                    üéØ Complete Analysis
                </div>
                <div class="type-selector" id="random-selector" onclick="selectQuestionType('random')">
                    üé≤ Random Mix
                </div>
            </div>
            
            <button class="btn btn-generate" onclick="generateNewQuestion()">Generate New Problem</button>
        </div>
        
        <div id="question-container"></div>
        
        <div class="answer-section">
            <div id="answer-inputs"></div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn" onclick="checkAnswers()">‚úì Check Answer</button>
                <button class="btn btn-secondary" onclick="showSolution()">üí° Show Solution</button>
                <button class="btn btn-secondary" onclick="clearAnswers()">üóëÔ∏è Clear</button>
            </div>
        </div>

        <div id="feedback" class="feedback hidden"></div>
        
        <div id="solution" class="solution hidden"></div>
    </div>

    <script>
        class GDPExpenditureGrowthSimulator {
            constructor() {
                // Economic scenarios with realistic data ranges
                this.scenarios = {
                    expansion: {
                        context: 'economic expansion',
                        description: 'strong growth with healthy investment and consumption',
                        nominalGDPRange: [18000, 22000], // USD billions
                        deflatorRange: [98, 105],
                        populationRange: [325, 335], // millions
                        hoursRange: [250, 275], // billion hours
                        growthRange: [2.5, 4.5]
                    },
                    recession: {
                        context: 'economic recession',
                        description: 'negative growth with reduced investment',
                        nominalGDPRange: [17000, 20000],
                        deflatorRange: [100, 107],
                        populationRange: [325, 335],
                        hoursRange: [240, 260],
                        growthRange: [-3.0, -0.5]
                    },
                    normal: {
                        context: 'normal economic conditions',
                        description: 'steady moderate growth with balanced components',
                        nominalGDPRange: [19000, 21000],
                        deflatorRange: [99, 104],
                        populationRange: [325, 335],
                        hoursRange: [250, 270],
                        growthRange: [1.5, 3.0]
                    },
                    high_inflation: {
                        context: 'high inflation period',
                        description: 'rapid price increases affecting real values',
                        nominalGDPRange: [20000, 25000],
                        deflatorRange: [110, 125],
                        populationRange: [325, 335],
                        hoursRange: [245, 265],
                        growthRange: [0.5, 2.5]
                    }
                };

                this.years = ['2022', '2023', '2024'];
                this.countries = ['United States', 'Germany', 'Japan', 'United Kingdom', 'Canada'];

                this.currentQuestion = null;
                this.currentSolution = null;
                this.questionCount = 1;
                this.questionType = 'basic';
            }

            randomBetween(min, max, decimals = 1) {
                const factor = Math.pow(10, decimals);
                return Math.round((Math.random() * (max - min) + min) * factor) / factor;
            }

            generateEconomicData(scenario = 'normal') {
                const scenarioData = this.scenarios[scenario];
                
                // Select random country and year
                const country = this.countries[Math.floor(Math.random() * this.countries.length)];
                const year = this.years[Math.floor(Math.random() * this.years.length)];
                
                // Generate base economic data
                const nominalGDP = this.randomBetween(scenarioData.nominalGDPRange[0], scenarioData.nominalGDPRange[1], 1);
                const gdpDeflator = this.randomBetween(scenarioData.deflatorRange[0], scenarioData.deflatorRange[1], 1);
                const population = this.randomBetween(scenarioData.populationRange[0], scenarioData.populationRange[1], 1);
                const totalHours = this.randomBetween(scenarioData.hoursRange[0], scenarioData.hoursRange[1], 1);
                
                // Calculate real GDP
                const realGDP = Math.round((nominalGDP / (gdpDeflator / 100)) * 10) / 10;
                
                // Generate expenditure components that sum to nominal GDP
                const consumptionRatio = this.randomBetween(0.65, 0.72, 3);
                const investmentRatio = this.randomBetween(0.15, 0.22, 3);
                const governmentRatio = this.randomBetween(0.18, 0.25, 3);
                const exportsRatio = this.randomBetween(0.10, 0.15, 3);
                const importsRatio = this.randomBetween(0.12, 0.17, 3);
                
                const consumption = Math.round(nominalGDP * consumptionRatio * 10) / 10;
                const investment = Math.round(nominalGDP * investmentRatio * 10) / 10;
                const government = Math.round(nominalGDP * governmentRatio * 10) / 10;
                const exports = Math.round(nominalGDP * exportsRatio * 10) / 10;
                const imports = Math.round(nominalGDP * importsRatio * 10) / 10;
                const netExports = Math.round((exports - imports) * 10) / 10;
                
                // Adjust consumption to make components sum exactly to nominal GDP
                const calculatedGDP = consumption + investment + government + netExports;
                const adjustedConsumption = Math.round((consumption + (nominalGDP - calculatedGDP)) * 10) / 10;
                
                // Calculate per capita and productivity
                const gdpPerCapita = Math.round((nominalGDP * 1000) / population);
                const realGDPPerCapita = Math.round((realGDP * 1000) / population);
                const productivity = Math.round((realGDP * 1000) / totalHours * 100) / 100;
                
                // Generate previous year data for growth calculations
                const prevRealGDP = Math.round(realGDP / (1 + (scenarioData.growthRange[0] + Math.random() * (scenarioData.growthRange[1] - scenarioData.growthRange[0])) / 100) * 10) / 10;
                const growthRate = Math.round(((realGDP - prevRealGDP) / prevRealGDP) * 1000) / 10;
                
                return {
                    scenario: scenario,
                    context: scenarioData.context,
                    description: scenarioData.description,
                    country: country,
                    year: year,
                    
                    // GDP Data
                    nominalGDP: nominalGDP,
                    realGDP: realGDP,
                    gdpDeflator: gdpDeflator,
                    
                    // Expenditure Components
                    consumption: adjustedConsumption,
                    investment: investment,
                    government: government,
                    exports: exports,
                    imports: imports,
                    netExports: netExports,
                    
                    // Population and productivity
                    population: population,
                    totalHours: totalHours,
                    gdpPerCapita: gdpPerCapita,
                    realGDPPerCapita: realGDPPerCapita,
                    productivity: productivity,
                    
                    // Growth data
                    prevRealGDP: prevRealGDP,
                    growthRate: growthRate
                };
            }

            generateQuestion(type = 'random') {
                const scenarios = Object.keys(this.scenarios);
                const scenario = scenarios[Math.floor(Math.random() * scenarios.length)];
                const data = this.generateEconomicData(scenario);
                
                if (type === 'basic') {
                    const basicTypes = ['nominal_gdp', 'real_gdp', 'gdp_per_capita', 'productivity'];
                    const selectedType = basicTypes[Math.floor(Math.random() * basicTypes.length)];
                    return this.generateQuestionByType(selectedType, data);
                } else if (type === 'growth') {
                    const growthTypes = ['economic_growth', 'growth_analysis', 'deflator_analysis'];
                    const selectedType = growthTypes[Math.floor(Math.random() * growthTypes.length)];
                    return this.generateQuestionByType(selectedType, data);
                } else if (type === 'comprehensive') {
                    return this.generateComprehensiveQuestion(data);
                } else {
                    // Random question type
                    const types = ['nominal_gdp', 'real_gdp', 'economic_growth', 'gdp_per_capita', 'productivity'];
                    const randomType = types[Math.floor(Math.random() * types.length)];
                    return this.generateQuestionByType(randomType, data);
                }
            }

            generateQuestionByType(type, data) {
                switch (type) {
                    case 'nominal_gdp':
                        return {
                            type: 'nominal_gdp',
                            data: data,
                            questionText: `Calculate the nominal GDP using the expenditure approach for ${data.country} in ${data.year}.`,
                            givenComponents: ['consumption', 'investment', 'government', 'exports', 'imports'],
                            correctAnswer: data.nominalGDP,
                            answerUnit: 'billion'
                        };
                    case 'real_gdp':
                        return {
                            type: 'real_gdp',
                            data: data,
                            questionText: `Calculate the real GDP for ${data.country} in ${data.year} using the GDP deflator.`,
                            givenComponents: ['nominalGDP', 'gdpDeflator'],
                            correctAnswer: data.realGDP,
                            answerUnit: 'billion'
                        };
                    case 'economic_growth':
                        return {
                            type: 'economic_growth',
                            data: data,
                            questionText: `Calculate the economic growth rate for ${data.country} between ${parseInt(data.year) - 1} and ${data.year}.`,
                            givenComponents: ['realGDP', 'prevRealGDP'],
                            correctAnswer: data.growthRate,
                            answerUnit: '%'
                        };
                    case 'gdp_per_capita':
                        return {
                            type: 'gdp_per_capita',
                            data: data,
                            questionText: `Calculate the nominal GDP per capita for ${data.country} in ${data.year}.`,
                            givenComponents: ['nominalGDP', 'population'],
                            correctAnswer: data.gdpPerCapita,
                            answerUnit: 'USD'
                        };
                    case 'productivity':
                        return {
                            type: 'productivity',
                            data: data,
                            questionText: `Calculate the labor productivity (real GDP per hour worked) for ${data.country} in ${data.year}.`,
                            givenComponents: ['realGDP', 'totalHours'],
                            correctAnswer: data.productivity,
                            answerUnit: 'USD per hour'
                        };
                }
            }

            generateComprehensiveQuestion(data) {
                return {
                    type: 'comprehensive',
                    data: data,
                    questionText: `Complete economic analysis for ${data.country} during ${data.context} in ${data.year}.`,
                    givenComponents: ['consumption', 'investment', 'government', 'exports', 'imports', 'gdpDeflator', 'population', 'totalHours', 'prevRealGDP'],
                    answers: {
                        nominalGDP: data.nominalGDP,
                        realGDP: data.realGDP,
                        growthRate: data.growthRate,
                        gdpPerCapita: data.gdpPerCapita,
                        productivity: data.productivity,
                        netExports: data.netExports
                    }
                };
            }

            displayQuestion(questionData) {
                const data = questionData.data;
                let typeClass, typeText, questionHTML;

                // Determine question type styling
                if (questionData.type === 'comprehensive') {
                    typeClass = 'type-comprehensive';
                    typeText = 'üéØ Complete Economic Analysis';
                } else if (['economic_growth', 'growth_analysis', 'deflator_analysis'].includes(questionData.type)) {
                    typeClass = 'type-growth';
                    typeText = 'üìà Economic Growth Analysis';
                } else {
                    typeClass = 'type-basic';
                    typeText = 'üí∞ GDP & Economic Indicators';
                }

                // Build question display
                questionHTML = `
                    <div class="type-indicator ${typeClass}">${typeText}</div>
                    
                    <div class="economic-context">
                        <div class="context-header">
                            üåç Economic Context
                        </div>
                        <div class="economic-data">
                            <div class="data-item">
                                <span class="data-label">Country:</span>
                                <span class="data-value">${data.country}</span>
                            </div>
                            <div class="data-item">
                                <span class="data-label">Year:</span>
                                <span class="data-value">${data.year}</span>
                            </div>
                            <div class="data-item">
                                <span class="data-label">Economic Condition:</span>
                                <span class="data-value">${data.context}</span>
                            </div>
                        </div>
                        <p style="font-style: italic; color: #555; margin-top: 15px;">
                            ${data.description}
                        </p>
                    </div>
                    
                    <div class="question-text">
                        <h3>${questionData.questionText}</h3>
                    </div>
                `;

                // Add given data section
                questionHTML += `<div class="expenditure-components">
                    <div style="font-weight: bold; color: #2c3e50; margin-bottom: 10px; font-size: 1.1em;">
                        üìä Given Economic Data
                    </div>
                    <div style="font-style: italic; color: #666; margin-bottom: 15px; font-size: 0.9em;">
                        <strong>Note:</strong> All monetary values in USD billions unless otherwise specified
                    </div>
                    <div class="component-grid">`;

                questionData.givenComponents.forEach(component => {
                    let label, value, unit;
                    switch (component) {
                        case 'nominalGDP':
                            label = 'Nominal GDP';
                            value = data.nominalGDP.toLocaleString();
                            unit = '';
                            break;
                        case 'realGDP':
                            label = 'Real GDP';
                            value = data.realGDP.toLocaleString();
                            unit = '';
                            break;
                        case 'consumption':
                            label = 'Consumption (C)';
                            value = data.consumption.toLocaleString();
                            unit = '';
                            break;
                        case 'investment':
                            label = 'Investment (I)';
                            value = data.investment.toLocaleString();
                            unit = '';
                            break;
                        case 'government':
                            label = 'Government (G)';
                            value = data.government.toLocaleString();
                            unit = '';
                            break;
                        case 'exports':
                            label = 'Exports (X)';
                            value = data.exports.toLocaleString();
                            unit = '';
                            break;
                        case 'imports':
                            label = 'Imports (M)';
                            value = data.imports.toLocaleString();
                            unit = '';
                            break;
                        case 'gdpDeflator':
                            label = 'GDP Deflator';
                            value = data.gdpDeflator;
                            unit = '(base=100)';
                            break;
                        case 'population':
                            label = 'Population';
                            value = data.population.toLocaleString();
                            unit = 'million';
                            break;
                        case 'totalHours':
                            label = 'Total Hours Worked';
                            value = data.totalHours.toLocaleString();
                            unit = 'billion hours';
                            break;
                        case 'prevRealGDP':
                            label = `Real GDP (${parseInt(data.year) - 1})`;
                            value = data.prevRealGDP.toLocaleString();
                            unit = '';
                            break;
                    }
                    
                    questionHTML += `
                        <div class="component-item">
                            <div class="component-label">${label}</div>
                            <div class="component-value">${value}${unit ? ' ' + unit : ''}</div>
                        </div>
                    `;
                });

                questionHTML += `</div></div>`;

                // Set up answer inputs based on question type
                if (questionData.type === 'comprehensive') {
                    questionHTML += `
                        <div style="background: linear-gradient(135deg, #f8f9fa, #e9ecef); padding: 20px; border-radius: 10px; margin: 15px 0; border-left: 4px solid #667eea;">
                            <div style="font-weight: bold; color: #2c3e50; margin-bottom: 15px; font-size: 1.2em;">
                                üéØ Calculate All Components
                            </div>
                            <p><strong>Part A:</strong> Nominal GDP using expenditure approach</p>
                            <p><strong>Part B:</strong> Real GDP adjusted for inflation</p>
                            <p><strong>Part C:</strong> Economic growth rate</p>
                            <p><strong>Part D:</strong> GDP per capita</p>
                            <p><strong>Part E:</strong> Labor productivity</p>
                            <p><strong>Part F:</strong> Net exports</p>
                        </div>
                    `;
                    
                    document.getElementById('answer-inputs').innerHTML = `
                        <div class="comprehensive-answers">
                            <div class="input-group">
                                <label>Part A - Nominal GDP:</label>
                                <input type="number" id="nominal-gdp-input" step="0.1" placeholder="0.0">
                                <span style="font-weight: bold;">billion</span>
                            </div>
                            <div class="input-group">
                                <label>Part B - Real GDP:</label>
                                <input type="number" id="real-gdp-input" step="0.1" placeholder="0.0">
                                <span style="font-weight: bold;">billion</span>
                            </div>
                            <div class="input-group">
                                <label>Part C - Growth Rate:</label>
                                <input type="number" id="growth-rate-input" step="0.1" placeholder="0.0">
                                <span style="font-weight: bold;">%</span>
                            </div>
                            <div class="input-group">
                                <label>Part D - GDP per Capita:</label>
                                <input type="number" id="gdp-per-capita-input" step="1" placeholder="0">
                                <span style="font-weight: bold;">USD</span>
                            </div>
                            <div class="input-group">
                                <label>Part E - Productivity:</label>
                                <input type="number" id="productivity-input" step="0.01" placeholder="0.00">
                                <span style="font-weight: bold;">USD per hour</span>
                            </div>
                            <div class="input-group">
                                <label>Part F - Net Exports:</label>
                                <input type="number" id="net-exports-input" step="0.1" placeholder="0.0">
                                <span style="font-weight: bold;">billion</span>
                            </div>
                        </div>
                    `;
                } else {
                    // Single answer input
                    const inputStep = questionData.answerUnit === '%' ? '0.1' : questionData.answerUnit === 'USD' ? '1' : questionData.answerUnit === 'USD per hour' ? '0.01' : '0.1';
                    const placeholder = questionData.answerUnit === '%' ? '0.0' : questionData.answerUnit === 'USD' ? '0' : questionData.answerUnit === 'USD per hour' ? '0.00' : '0.0';
                    
                    document.getElementById('answer-inputs').innerHTML = `
                        <div class="input-group">
                            <label>Answer:</label>
                            <input type="number" id="answer-input" step="${inputStep}" placeholder="${placeholder}">
                            <span style="font-weight: bold;">${questionData.answerUnit}</span>
                        </div>
                    `;
                }

                document.getElementById('question-container').innerHTML = questionHTML;
            }

            checkSingleAnswer(answer, correctData) {
                const tolerance = correctData.answerUnit === '%' ? 0.1 : 
                                correctData.answerUnit === 'USD' ? 100 : 
                                correctData.answerUnit === 'USD per hour' ? 0.01 : 0.5;
                const isCorrect = Math.abs(answer - correctData.correctAnswer) <= tolerance;
                
                return {
                    isCorrect,
                    correctAnswer: correctData.correctAnswer
                };
            }

            checkComprehensiveAnswers(answers, correctData) {
                const tolerance = {
                    gdp: 0.5,
                    percentage: 0.1,
                    currency: 100,
                    productivity: 0.01
                };
                
                const results = {
                    nominalGDP: Math.abs(answers.nominalGDP - correctData.answers.nominalGDP) <= tolerance.gdp,
                    realGDP: Math.abs(answers.realGDP - correctData.answers.realGDP) <= tolerance.gdp,
                    growthRate: Math.abs(answers.growthRate - correctData.answers.growthRate) <= tolerance.percentage,
                    gdpPerCapita: Math.abs(answers.gdpPerCapita - correctData.answers.gdpPerCapita) <= tolerance.currency,
                    productivity: Math.abs(answers.productivity - correctData.answers.productivity) <= tolerance.productivity,
                    netExports: Math.abs(answers.netExports - correctData.answers.netExports) <= tolerance.gdp
                };
                
                const correctCount = Object.values(results).filter(x => x).length;
                const allCorrect = correctCount === 6;
                
                return {
                    results,
                    correctCount,
                    allCorrect,
                    correctAnswers: correctData.answers
                };
            }

            showSolution(questionData) {
                const data = questionData.data;
                let solutionHTML = '';
                
                if (questionData.type === 'nominal_gdp') {
                    solutionHTML = `
                        <h4>üí∞ Nominal GDP Calculation</h4>
                        
                        <div class="solution-step">
                            <h5>Formula: GDP = C + I + G + (X - M)</h5>
                            <div class="calculation">Step 1: Identify all expenditure components</div>
                            <div class="calculation">C = ${data.consumption.toLocaleString()} billion USD</div>
                            <div class="calculation">I = ${data.investment.toLocaleString()} billion USD</div>
                            <div class="calculation">G = ${data.government.toLocaleString()} billion USD</div>
                            <div class="calculation">X = ${data.exports.toLocaleString()} billion USD</div>
                            <div class="calculation">M = ${data.imports.toLocaleString()} billion USD</div>
                        </div>
                        
                        <div class="solution-step">
                            <h5>Step 2: Calculate net exports</h5>
                            <div class="calculation">(X - M) = ${data.exports.toLocaleString()} - ${data.imports.toLocaleString()} = ${data.netExports.toLocaleString()} billion USD</div>
                        </div>
                        
                        <div class="solution-step">
                            <h5>Step 3: Sum all components</h5>
                            <div class="calculation">GDP = ${data.consumption.toLocaleString()} + ${data.investment.toLocaleString()} + ${data.government.toLocaleString()} + ${data.netExports.toLocaleString()}</div>
                            <div class="result">GDP = ${data.nominalGDP.toLocaleString()} billion USD</div>
                        </div>
                        
                        <div class="interpretation-box">
                            <strong>üí° Economic Insight:</strong> This GDP level reflects ${data.context} conditions in ${data.country}, with ${data.netExports > 0 ? 'positive' : 'negative'} net exports indicating a trade ${data.netExports > 0 ? 'surplus' : 'deficit'}.
                        </div>
                    `;

                } else if (questionData.type === 'real_gdp') {
                    solutionHTML = `
                        <h4>üìä Real GDP Calculation</h4>
                        
                        <div class="solution-step">
                            <h5>Formula: Real GDP = Nominal GDP √∑ (GDP Deflator √∑ 100)</h5>
                            <div class="calculation">Given:</div>
                            <div class="calculation">Nominal GDP = ${data.nominalGDP.toLocaleString()} billion USD</div>
                            <div class="calculation">GDP Deflator = ${data.gdpDeflator} (base year = 100)</div>
                        </div>
                        
                        <div class="solution-step">
                            <h5>Calculation</h5>
                            <div class="calculation">Real GDP = ${data.nominalGDP.toLocaleString()} √∑ (${data.gdpDeflator} √∑ 100)</div>
                            <div class="calculation">Real GDP = ${data.nominalGDP.toLocaleString()} √∑ ${(data.gdpDeflator / 100).toFixed(2)}</div>
                            <div class="result">Real GDP = ${data.realGDP.toLocaleString()} billion USD</div>
                        </div>
                        
                        <div class="interpretation-box">
                            <strong>üí° Economic Insight:</strong> Real GDP of ${data.realGDP.toLocaleString()} billion represents the economy's output adjusted for inflation, providing a better measure of actual economic performance than nominal GDP.
                        </div>
                    `;

                } else if (questionData.type === 'economic_growth') {
                    solutionHTML = `
                        <h4>üìà Economic Growth Rate Calculation</h4>
                        
                        <div class="solution-step">
                            <h5>Formula: Growth Rate = ((GDP‚ÇÇ - GDP‚ÇÅ) √∑ GDP‚ÇÅ) √ó 100%</h5>
                            <div class="calculation">Given:</div>
                            <div class="calculation">Real GDP ${data.year} = ${data.realGDP.toLocaleString()} billion USD</div>
                            <div class="calculation">Real GDP ${parseInt(data.year) - 1} = ${data.prevRealGDP.toLocaleString()} billion USD</div>
                        </div>
                        
                        <div class="solution-step">
                            <h5>Calculation</h5>
                            <div class="calculation">Growth Rate = ((${data.realGDP.toLocaleString()} - ${data.prevRealGDP.toLocaleString()}) √∑ ${data.prevRealGDP.toLocaleString()}) √ó 100%</div>
                            <div class="calculation">Growth Rate = (${(data.realGDP - data.prevRealGDP).toFixed(1)} √∑ ${data.prevRealGDP.toLocaleString()}) √ó 100%</div>
                            <div class="result">Growth Rate = ${data.growthRate}%</div>
                        </div>
                        
                        <div class="interpretation-box">
                            <strong>üìà Economic Insight:</strong> A growth rate of ${data.growthRate}% indicates ${data.growthRate > 0 ? 'economic expansion' : 'economic contraction'}, ${data.growthRate > 3 ? 'strong' : data.growthRate > 0 ? 'moderate' : 'negative'} performance for ${data.country}.
                        </div>
                    `;

                } else if (questionData.type === 'comprehensive') {
                    solutionHTML = `
                        <h4>üéØ Complete Economic Analysis</h4>
                        
                        <div class="solution-step">
                            <h5>Part A: Nominal GDP Calculation</h5>
                            <div class="calculation">GDP = C + I + G + (X - M)</div>
                            <div class="calculation">GDP = ${data.consumption.toLocaleString()} + ${data.investment.toLocaleString()} + ${data.government.toLocaleString()} + (${data.exports.toLocaleString()} - ${data.imports.toLocaleString()})</div>
                            <div class="result">Nominal GDP = ${data.nominalGDP.toLocaleString()} billion USD</div>
                        </div>
                        
                        <div class="solution-step">
                            <h5>Part B: Real GDP</h5>
                            <div class="calculation">Real GDP = ${data.nominalGDP.toLocaleString()} √∑ (${data.gdpDeflator} √∑ 100)</div>
                            <div class="result">Real GDP = ${data.realGDP.toLocaleString()} billion USD</div>
                        </div>
                        
                        <div class="solution-step">
                            <h5>Part C: Economic Growth Rate</h5>
                            <div class="calculation">Growth = ((${data.realGDP.toLocaleString()} - ${data.prevRealGDP.toLocaleString()}) √∑ ${data.prevRealGDP.toLocaleString()}) √ó 100%</div>
                            <div class="result">Growth Rate = ${data.growthRate}%</div>
                        </div>
                        
                        <div class="solution-step">
                            <h5>Part D: GDP per Capita</h5>
                            <div class="calculation">GDP per capita = (${data.nominalGDP.toLocaleString()} √ó 1000) √∑ ${data.population.toLocaleString()}</div>
                            <div class="result">GDP per capita = ${data.gdpPerCapita.toLocaleString()} USD</div>
                        </div>
                        
                        <div class="solution-step">
                            <h5>Part E: Labor Productivity</h5>
                            <div class="calculation">Productivity = (${data.realGDP.toLocaleString()} √ó 1000) √∑ ${data.totalHours.toLocaleString()}</div>
                            <div class="result">Productivity = ${data.productivity} USD per hour</div>
                        </div>
                        
                        <div class="solution-step">
                            <h5>Part F: Net Exports</h5>
                            <div class="calculation">Net Exports = ${data.exports.toLocaleString()} - ${data.imports.toLocaleString()}</div>
                            <div class="result">Net Exports = ${data.netExports.toLocaleString()} billion USD</div>
                        </div>
                        
                        <div class="interpretation-box">
                            <strong>üåç Economic Summary:</strong> ${data.country} shows ${data.growthRate > 0 ? 'positive' : 'negative'} economic growth of ${data.growthRate}% during ${data.context}, with ${data.productivity > 75 ? 'high' : data.productivity > 50 ? 'moderate' : 'low'} labor productivity and ${data.netExports > 0 ? 'trade surplus' : 'trade deficit'}.
                        </div>
                    `;

                } else {
                    // Other single calculation types
                    solutionHTML = `
                        <h4>üìä ${questionData.type.toUpperCase().replace('_', ' ')} Calculation</h4>
                        
                        <div class="solution-step">
                            <h5>Solution</h5>
                            <div class="calculation">Based on standard economic formulas</div>
                            <div class="result">Answer = ${questionData.correctAnswer.toLocaleString()} ${questionData.answerUnit}</div>
                        </div>
                        
                        <div class="interpretation-box">
                            <strong>üí° Economic Context:</strong> This result reflects ${data.context} conditions in ${data.country}'s economy.
                        </div>
                    `;
                }
                
                document.getElementById('solution').innerHTML = solutionHTML;
                document.getElementById('solution').classList.remove('hidden');
            }
        }

        // Initialize simulator
        const simulator = new GDPExpenditureGrowthSimulator();

        function selectQuestionType(type) {
            simulator.questionType = type;
            
            // Update selector appearance
            document.querySelectorAll('.type-selector').forEach(el => el.classList.remove('active'));
            document.getElementById(type + '-selector').classList.add('active');
            
            generateNewQuestion();
        }

        function generateNewQuestion() {
            simulator.currentQuestion = simulator.generateQuestion(simulator.questionType);
            simulator.displayQuestion(simulator.currentQuestion);
            
            // Clear previous answers and feedback
            clearAnswers();
            document.getElementById('feedback').classList.add('hidden');
            document.getElementById('solution').classList.add('hidden');
            
            // Update question counter
            document.getElementById('question-counter').textContent = `Question ${simulator.questionCount} of ‚àû`;
            simulator.questionCount++;
        }

        function checkAnswers() {
            if (!simulator.currentQuestion) {
                alert('Please generate a question first!');
                return;
            }

            const feedback = document.getElementById('feedback');
            
            if (simulator.currentQuestion.type === 'comprehensive') {
                const answers = {
                    nominalGDP: parseFloat(document.getElementById('nominal-gdp-input').value),
                    realGDP: parseFloat(document.getElementById('real-gdp-input').value),
                    growthRate: parseFloat(document.getElementById('growth-rate-input').value),
                    gdpPerCapita: parseFloat(document.getElementById('gdp-per-capita-input').value),
                    productivity: parseFloat(document.getElementById('productivity-input').value),
                    netExports: parseFloat(document.getElementById('net-exports-input').value)
                };
                
                if (Object.values(answers).some(isNaN)) {
                    feedback.className = 'feedback incorrect';
                    feedback.innerHTML = '‚ö†Ô∏è Please enter valid numbers for all parts.';
                    feedback.classList.remove('hidden');
                    return;
                }
                
                const result = simulator.checkComprehensiveAnswers(answers, simulator.currentQuestion);
                
                // Update input styling
                document.getElementById('nominal-gdp-input').className = result.results.nominalGDP ? 'input-correct' : 'input-incorrect';
                document.getElementById('real-gdp-input').className = result.results.realGDP ? 'input-correct' : 'input-incorrect';
                document.getElementById('growth-rate-input').className = result.results.growthRate ? 'input-correct' : 'input-incorrect';
                document.getElementById('gdp-per-capita-input').className = result.results.gdpPerCapita ? 'input-correct' : 'input-incorrect';
                document.getElementById('productivity-input').className = result.results.productivity ? 'input-correct' : 'input-incorrect';
                document.getElementById('net-exports-input').className = result.results.netExports ? 'input-correct' : 'input-incorrect';
                
                feedback.classList.remove('hidden');
                
                if (result.allCorrect) {
                    feedback.className = 'feedback correct';
                    feedback.innerHTML = 'üéâ Perfect! All economic calculations are correct!<br>üìä You have mastered GDP analysis and economic growth!';
                } else if (result.correctCount >= 4) {
                    feedback.className = 'feedback partial';
                    feedback.innerHTML = `‚úÖ ${result.correctCount} out of 6 correct!<br>üí° Review the economic formulas and calculation steps.`;
                } else {
                    feedback.className = 'feedback incorrect';
                    feedback.innerHTML = `‚ùå Most calculations need adjustment.<br>üí∞ Remember the key GDP and growth formulas.`;
                }
            } else {
                const singleInput = parseFloat(document.getElementById('answer-input').value);
                
                if (isNaN(singleInput)) {
                    feedback.className = 'feedback incorrect';
                    feedback.innerHTML = '‚ö†Ô∏è Please enter a valid number.';
                    feedback.classList.remove('hidden');
                    return;
                }
                
                const result = simulator.checkSingleAnswer(singleInput, simulator.currentQuestion);
                
                // Update input styling
                document.getElementById('answer-input').className = result.isCorrect ? 'input-correct' : 'input-incorrect';
                
                feedback.classList.remove('hidden');
                
                if (result.isCorrect) {
                    feedback.className = 'feedback correct';
                    feedback.innerHTML = 'üéâ Excellent! Your economic calculation is correct!<br>üìà Well done with GDP and economic analysis!';
                } else {
                    feedback.className = 'feedback incorrect';
                    feedback.innerHTML = `‚ùå Not quite right. The correct answer is ${result.correctAnswer.toLocaleString()} ${simulator.currentQuestion.answerUnit}.<br>üí° Review the economic formulas and try again.`;
                }
            }
        }

        function showSolution() {
            if (!simulator.currentQuestion) {
                alert('Please generate a question first!');
                return;
            }
            
            simulator.showSolution(simulator.currentQuestion);
        }

        function clearAnswers() {
            const inputs = document.querySelectorAll('input[type="number"]');
            inputs.forEach(input => {
                input.value = '';
                input.className = '';
            });
        }

        // Generate first question on page load
        window.onload = function() {
            generateNewQuestion();
        };
    </script>
</body>
</html>
